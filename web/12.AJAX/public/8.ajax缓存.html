<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>8.ajax缓存</title>
    <!-- 在低版本的浏览器中，Ajax请求有严重的缓存问题，即在请求地址不发生变化的情况下，只有第一次请求会真正发送到服务器
    就比如test.txt 发送里面的内容第一次发成功了 后面再次发送换了内容也是发第一次的内容 只有第一次请求会真正的发送到服务器
    后续的请求都会从浏览器的缓存中获取结果，即使服务器的数据更新了，客户端依然拿到的是缓存中的旧数据 -->

    <!-- 解决方法：在请求地址后面加参数，保证每一次的请求参数的值不同 -->
</head>

<body>
    <button>发送ajax请求</button>
    <script>
        var btn = document.querySelector('button')
        btn.onclick = function() {
            var xhr = new XMLHttpRequest();

            //2.告诉ajax对象要向哪儿发送请求 以什么方式发送
            //在请求地址后面加参数，保证每一次的请求参数的值不同
            xhr.open('get', 'http://localhost:3000/cache?t=' + Math.random())

            //3.发送请求
            xhr.send()

            //4.获取服务器端响应到客户端的数据 onload接收完服务器端的响应之后就会触发
            xhr.onreadystatechange = function() {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    alert(xhr.responseText)
                }
            }
        }
    </script>
</body>

</html>